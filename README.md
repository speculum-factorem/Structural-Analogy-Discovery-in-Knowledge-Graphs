# SAGAM Framework

**Structural Analogy Discovery in Knowledge Graphs**

Фреймворк для обнаружения структурных аналогий в графах знаний с поддержкой кросс-доменного поиска паттернов.

## Описание

SAGAM (Structural Analogy Discovery in Knowledge Graphs) - это инновационный алгоритмический фреймворк для поиска структурных аналогий в масштабных графах знаний. Алгоритм реализует трехэтапную архитектуру:

1. **Семантико-структурная индексация** на основе расширенного LSH (Locality Sensitive Hashing)
2. **Многоуровневая фильтрация кандидатов** с использованием онтологических и структурных признаков
3. **Гибридная верификация** комбинацией точных и приближенных алгоритмов

## Особенности

-  Поиск изоморфных паттернов в графах знаний
-  Кросс-доменное обнаружение аналогий
-  Масштабируемая архитектура с LSH-индексацией
-  Многоуровневая фильтрация для оптимизации производительности
-  Гибридная верификация (вероятностная + точная)
-  Поддержка семантических слоев и онтологий

## Структура проекта

```
SAGAM/
├── src/main/java/com/sagam/
│   ├── core/                    # Основные классы
│   │   ├── Entity.java          # Сущность графа знаний
│   │   ├── Relation.java        # Отношение (ребро)
│   │   ├── KnowledgeGraph.java  # Модель графа знаний
│   │   └── SAGAMFramework.java  # Главный класс фреймворка
│   ├── indexing/                # Индексация
│   │   ├── Signature.java       # LSH сигнатура
│   │   └── SemanticLSHIndex.java # Semantic-Aware LSH
│   ├── filtering/               # Фильтрация
│   │   └── MultiLevelFilter.java # Многоуровневая фильтрация
│   ├── verification/            # Верификация
│   │   └── HybridVerifier.java  # Гибридный верификатор
│   ├── dataset/                 # Датасет
│   │   ├── DatasetGenerator.java # Генератор синтетических данных
│   │   └── DatasetExporter.java  # Экспорт в различные форматы
│   └── demo/                    # Демонстрационные примеры
│       ├── SAGAMDemo.java       # Основная демонстрация
│       └── DatasetDemo.java      # Демонстрация датасета
├── pom.xml                      # Maven конфигурация
└── README.md                    # Документация
```

## Требования

- Java 11 или выше
- Maven 3.6+

## Зависимости

- **JGraphT** - для работы с графами
- **Google Guava** - утилиты и коллекции
- **Gson** - работа с JSON
- **Apache Commons Lang** - дополнительные утилиты

## Установка

```bash
# Клонирование репозитория
git clone https://github.com/speculum-factorem/Structural-Analogy-Discovery-in-Knowledge-Graphs.git
cd SAGAM

# Сборка проекта
mvn clean compile

# Сборка JAR файла
mvn package
```

## Использование

### Базовый пример

```java
import com.sagam.core.*;
import com.sagam.dataset.DatasetGenerator;

// Создание графа знаний
KnowledgeGraph kg = DatasetGenerator.generateCrossDomainKnowledgeGraph();

// Инициализация фреймворка
SAGAMFramework sagam = new SAGAMFramework(kg);

// Создание запроса
KnowledgeGraph query = DatasetGenerator.createQueryPattern();

// Поиск аналогий
List<SAGAMFramework.AnalogyResult> results = sagam.findAnalogies(query, 10);

// Вывод результатов
for (SAGAMFramework.AnalogyResult result : results) {
    System.out.println("Схожесть: " + result.getSimilarity());
    System.out.println("Кандидат: " + result.getCandidate().getVertexCount() + " вершин");
}
```

### Запуск демонстраций

```bash
# Основная демонстрация алгоритма
mvn exec:java -Dexec.mainClass="com.sagam.demo.SAGAMDemo"

# Демонстрация генерации и экспорта датасета
mvn exec:java -Dexec.mainClass="com.sagam.demo.DatasetDemo"
```

## Датасет

Включен синтетический датасет с кросс-доменными аналогиями из четырех доменов:

1. **Биология**: паттерны мутаций генов, репарации ДНК, развития рака
2. **Кибербезопасность**: паттерны уязвимостей, механизмов защиты, системных взломов
3. **Финансы**: паттерны токсичных активов, цепочек доверия, финансовых кризисов
4. **Материаловедение**: паттерны структур, нано-элементов, оптических свойств

### Примеры аналогий в датасете

**Аналогия 1: Биология ↔ Кибербезопасность**
```
[Мутация гена BRCA1] → [Уязвимость ядра ОС]
[Репарация ДНК] → [Механизмы защиты]
[Неконтролируемое деление] → [Несанкционированный доступ]
```

**Аналогия 2: Биология ↔ Финансы**
```
[Мутация] → [Токсичный дериватив]
[Нарушение механизма] → [Нарушение цепочки доверия]
[Болезнь] → [Кризис]
```

## Алгоритм

### Фаза 1: Индексация

1. Извлечение структурных features (k-hop окрестности)
2. Извлечение семантических features (онтологические пути)
3. Извлечение контекстных features (графлеты)
4. Генерация комбинированных LSH сигнатур

### Фаза 2: Фильтрация

- **L0**: Онтологический префильтр (селективность ~85%)
- **L1**: LSH-индексация (селективность ~95%)
- **L2**: Графлет-фильтр (селективность ~99%)
- **L3**: Быстрая верификация (селективность ~99.9%)

### Фаза 3: Верификация

- Вероятностная проверка через случайные блуждания
- Точная проверка с отсечениями (упрощенный Ullmann)
- Комбинированная оценка схожести

## Параметры

При создании `SAGAMFramework` можно настроить:

- `numHashFunctions` - количество хеш-функций для LSH (по умолчанию: 128)
- `radius` - радиус k-hop окрестности (по умолчанию: 2)
- `similarityThreshold` - порог схожести для верификации (по умолчанию: 0.7)

## Экспорт данных

Датасет можно экспортировать в различные форматы:

```java
// JSON
DatasetExporter.exportToJSON(kg, "dataset.json");

// GraphML (для визуализации в Gephi, yEd и др.)
DatasetExporter.exportToGraphML(kg, "dataset.graphml");

// Текстовый формат
DatasetExporter.exportToText(kg, "dataset.txt");
```

## Производительность

Алгоритм оптимизирован для работы с большими графами:

- **Сложность**: O(n^{1+α}), где α < 0.5
- **Масштабируемость**: линейная с количеством процессоров
- **Память**: эффективное использование через LSH-индексацию

## Применения

1. **Биоинформатика**: перенос терапевтических мишеней между доменами
2. **Материаловедение**: дизайн метаматериалов через биологические аналогии
3. **Финансовое моделирование**: прогнозирование кризисов через экологические модели
4. **Междисциплинарные исследования**: генерация гипотез через кросс-доменные аналогии

## Будущие улучшения

- [ ] Интеграция с LLM для генерации объяснений
- [ ] Поддержка потоковых графов
- [ ] Распределенная версия для кластеров
- [ ] Нейросетевой верификатор
- [ ] Визуализация аналогий